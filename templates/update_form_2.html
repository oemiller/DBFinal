<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Update Table Entry</title>
  <script>
    function isNumeric(value) {
      return /^\d+(\.\d+)?$/.test(value);
    }

    function formatMonthYear() {
      const month = document.getElementById("month").value;
      const year = document.getElementById("year").value;
      document.getElementById("month_year").value = year + " " + month;
    }

    function validateForm(event) {
      formatMonthYear();

      const numericFields = [
        "wood_energy_production",
        "biofuels_production",
        "total_biomass_energy_production",
        "total_renewable_energy_production",
        "hydroelectric_power_consumption",
        "geothermal_energy_consumption",
        "solar_energy_consumption",
        "wind_energy_consumption",
        "wood_energy_consumption",
        "waste_energy_consumption",
        "biofuels_consumption",
        "total_biomass_energy_consumption",
        "total_renewable_energy_consumption"
      ];

      for (const field of numericFields) {
        const value = document.getElementById(field).value.trim();
        if (value !== "" && !isNumeric(value)) {
          alert("Invalid input: " + field + " must be numeric.");
          window.location.reload();
          event.preventDefault();
          return false;
        }
      }

      return true;
    }
  </script>
</head>
<body>
  <h1>Update Table Entry</h1>
  
  <form method="POST" action="" onsubmit="return validateForm(event)">
    <!-- Month and Year Dropdowns -->
    <label for="month">Month:</label>
    <select id="month">
      <option>January</option>
      <option>February</option>
      <option>March</option>
      <option>April</option>
      <option>May</option>
      <option>June</option>
      <option>July</option>
      <option>August</option>
      <option>September</option>
      <option>October</option>
      <option>November</option>
      <option>December</option>
    </select>

    <label for="year">Year:</label>
    <select id="year">
      <!-- Use static or template-generated options -->
      <script>
        for (let y = 1979; y <= 2025; y++) {
          document.write(`<option>${y}</option>`);
        }
      </script>
    </select>

    <input type="hidden" id="month_year" name="month_year"><br><br>

    <!-- Input Fields -->
    <label for="wood_energy_production">Wood Energy Production:</label>
    <input type="text" id="wood_energy_production" name="wood_energy_production"><br><br>

    <label for="biofuels_production">Biofuels Production:</label>
    <input type="text" id="biofuels_production" name="biofuels_production"><br><br>

    <label for="total_biomass_energy_production">Total Biomass Energy Production:</label>
    <input type="text" id="total_biomass_energy_production" name="total_biomass_energy_production"><br><br>

    <label for="total_renewable_energy_production">Total Renewable Energy Production:</label>
    <input type="text" id="total_renewable_energy_production" name="total_renewable_energy_production"><br><br>

    <label for="hydroelectric_power_consumption">Hydroelectric Power Consumption:</label>
    <input type="text" id="hydroelectric_power_consumption" name="hydroelectric_power_consumption"><br><br>

    <label for="geothermal_energy_consumption">Geothermal Energy Consumption:</label>
    <input type="text" id="geothermal_energy_consumption" name="geothermal_energy_consumption"><br><br>

    <label for="solar_energy_consumption">Solar Energy Consumption:</label>
    <input type="text" id="solar_energy_consumption" name="solar_energy_consumption"><br><br>

    <label for="wind_energy_consumption">Wind Energy Consumption:</label>
    <input type="text" id="wind_energy_consumption" name="wind_energy_consumption"><br><br>

    <label for="wood_energy_consumption">Wood Energy Consumption:</label>
    <input type="text" id="wood_energy_consumption" name="wood_energy_consumption"><br><br>

    <label for="waste_energy_consumption">Waste Energy Consumption:</label>
    <input type="text" id="waste_energy_consumption" name="waste_energy_consumption"><br><br>

    <label for="biofuels_consumption">Biofuels Consumption:</label>
    <input type="text" id="biofuels_consumption" name="biofuels_consumption"><br><br>

    <label for="total_biomass_energy_consumption">Total Biomass Energy Consumption:</label>
    <input type="text" id="total_biomass_energy_consumption" name="total_biomass_energy_consumption"><br><br>

    <label for="total_renewable_energy_consumption">Total Renewable Energy Consumption:</label>
    <input type="text" id="total_renewable_energy_consumption" name="total_renewable_energy_consumption"><br><br>

    <label for="commit">Commit:</label>
    <select id="commit" name="commit">
      <option value="yes">Yes</option>
      <option value="no">No</option>
    </select><br><br>
    <button type="submit">Update</button>
  </form>
</body>
</html>

